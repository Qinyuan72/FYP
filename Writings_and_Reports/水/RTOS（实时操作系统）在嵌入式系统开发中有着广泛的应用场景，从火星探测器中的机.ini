RTOS（实时操作系统）在嵌入式系统开发中有着广泛的应用场景，从火星探测器中的机器人控制任务，到数字信号处理（DSP）中的数据调度与应用，均依赖于其对任务调度精度的严格控制能力。通过在任务执行中引入时间片调度与多任务管理机制，RTOS 能够让传统的 ARM 或 AVR 架构芯片，在有限的资源下完成更复杂、更精细化的控制任务，其核心优势就在于对“时间准确性（time determinism）”的极致追求。

本项目的目标，正是基于 STM32 微控制器平台，构建一套基于 FreeRTOS 的通用型数据采集系统。RTOS 在本系统中的角色是不可替代的：它不仅为任务之间的协调调度提供基础平台，更通过严格的优先级配置和时间片控制，实现了对系统中多路 ADC、DAC 与数字 I/O 模块的高效管理，同时确保与 PC 端的通信过程稳定可靠，具备扩展外设的能力。

作为一套低速、通用型的数据采集系统，该项目在工程实践中具备广泛的适配能力。其结构灵活、可扩展性强，可在工业自动化、土木工程、机械设备、车辆电子控制、安全防护系统等多个领域中，根据具体需求进行快速定制与集成。

例如，在电池管理系统（Battery Management System, BMS）中，本项目即可用于实现电池组的状态监控与控制。ADC 阵列用于获取每一节电池的实时电压数据，DAC 模块则可用于向功率半导体器件提供控制电压，实现对充电回路的精准调控；数字 I/O 模块可用于实现简易的电池状态指示；而 PC 端的串口通信接口则为故障检测、系统控制和算法计算提供基础平台，整体形成一套集成度高、模块化程度强的控制子系统。

再如，在工业振动检测应用中，大型旋转机械设备（如风力发电机、火力涡轮机、机械发动机等）需要进行持续、稳定的振动状态监控，而其系统的共振频率往往低于 1kHz。该项目通过 ADC 采样模块可实时获取振动信号，再通过串口通信或 SPI 总线与 PLC 系统通信，构建反馈控制回路，从而实现对机械状态的实时监控与数据分析。
系统实现阶段划分与开发进程详述
为实现一个具备完整功能、结构清晰且具有工程拓展潜力的嵌入式数据采集系统，本项目从立项伊始即根据目标的复杂程度与资源限制，将系统实现划分为三个阶段，分别为：面包板原型验证阶段（Proof-of-Concept Prototype）、PCB原型开发阶段（NUCLEO接口型PCB）以及片上系统集成阶段（Chip-on-Board, CoB Design）。每个阶段皆有其明确的任务边界与实施目标，并在进展中不断根据实际情况进行迭代与调整。以下对各阶段进行详尽说明。

第一阶段：面包板原型验证（Proof-of-Concept）
在该阶段，开发团队首先聚焦于系统的核心功能验证与模块互联逻辑的测试，采用常见的面包板方式进行硬件构建。此举的核心目标在于：

验证数字 I/O 控制链路的可行性：
包括 74HC595（串转并）与 74HC165（并转串）这两种移位寄存器芯片的连接方式、电平控制信号的时序要求、SPI 通信协议下的时钟边沿同步等。

测试 STM32 与外设芯片之间的数据传输路径：
通过使用 STM32 NUCLEO-L476RG 开发板的 SPI 模块，对各类控制信号进行驱动测试，包括：SPI_CLK、SPI_MOSI、SPI_MISO、LATCH、OE、CLR 等。同时测试 GPIO 控制功能在 HAL 底层驱动的配置逻辑。

RTOS 基础功能接入验证：
包含任务调度机制的运行测试、SysTick 定时器配置的精度验证、基本的任务切换响应，以及对未来多任务并行处理能力的初步观察。所有测试均在 STM32CubeIDE 环境下完成，配合 CMSIS-RTOS V2 软件组件进行调试。

该阶段验证的成果，是为系统整体功能的后续硬件固化和布局提供逻辑层面与电气连接层面的依据。通过在面包板上逐步拼接模块，并引入简化的测试脚本和逻辑探针进行信号监测，开发团队获得了对系统操作时序、通信流程以及各模块之间依赖关系的更深刻理解。与此同时，也积累了后续 PCB 设计所需的重要参数，如布线需求、上拉/下拉电阻值、IO引脚配置策略等。

然而，由于面包板结构在连接稳定性、电磁干扰控制和空间布局上存在诸多限制，特别是在数据通道较多（如 16x16 数字通道）时，出现了线路凌乱、接触不良、短暂通信中断等不稳定因素，因此必须进入第二阶段，将结构进一步固化、规范化。

第二阶段：NUCLEO接口型PCB原型开发（Prototype PCB）
本项目的重点工作集中在本阶段的完成上。该阶段的主要目标是将前述在面包板上已验证的电路结构进行结构化封装，通过 PCB 设计将其转化为一块可重复使用、接插规范、布线稳定的模块化系统，专门适配 NUCLEO-L476RG 开发板，实现如下技术目标：

固定接口封装：
所有 SPI 通信线、数字输入输出控制线、LATCH 控制线等，均以明确的总线形式布线至标准 2.54mm 接针口，提升调试与插拔的便利性。PCB布线遵循对称布线、避免交叉、减少飞线等基本设计规范。

电源与接地策略设计：
为确保逻辑电平稳定性以及系统抗干扰能力，所有芯片均配置旁路电容（如104/106），并根据芯片推荐值配置必要的上拉电阻和限流电阻，避免因短时电流过冲导致芯片损坏。

模块化设计思想体现：
每一个功能子模块（如：数字输入、数字输出）均以独立的功能区在 PCB 上呈现，并通过清晰的注释与网格编号，标明连接方式及功能走向，便于后续系统扩展或局部修改。

SPI 扩展策略实现：
在本阶段中，尤其重要的是实现了 SPI 总线的扩展方案，通过使用移位寄存器的“菊花链式”连接方法（Daisy Chain），显著减少了 MCU 所需控制引脚数量，证明了系统在有限 IO 情况下的可扩展性与实用性。

数字输入输出模块的完全实现与验证：
本阶段已成功实现并测试数字输入（DI）模块与数字输出（DO）模块，完成了从 NUCLEO 板控制、SPI通信、信号逻辑采集与反馈的完整闭环。测试结果表明数据读取准确、逻辑转换稳定，符合设计预期。

可以说，本阶段构成了本项目在可行性与工程实现之间的关键桥梁：它既保留了对教育目标“动手能力+系统设计”的体现，又为未来更高级别的系统搭建打下了坚实的硬件基础。

第三阶段：片上系统集成（Chip-on-Board, CoB）
本阶段属于项目的远期目标与系统理想状态设想。根据原始设计规划，项目最终应发展成为一套完整的、具备工程落地能力的嵌入式板卡系统，其核心特征包括：

STM32 芯片直接贴片（不再依赖开发板）：
通过将 STM32 核心芯片（如 LQFP64/LQFP100 封装）直接焊接至 PCB 主板，完成 MCU 周边供电、晶振、调试接口（如 SWD）、复位等外围电路设计，进入 MCU 系统级硬件设计的范畴。

单板系统集成：
包括电源管理（LDO/BUCK）、USB/串口通信、外设芯片（ADC/DAC/IO Expander）、状态指示模块（LED、蜂鸣器）等的集成布板，实现真正意义上的“工业控制器”原型系统。

工业外壳预留与接口标准化：
考虑对 DIN-Rail 安装、螺丝固定孔、标准 DB9/USB/TTL 接口等参数进行结构预留，为将来实际部署创造可能性。

然而，限于当前 FYP 项目的经费支持与时间周期，本阶段并未正式展开。**本项目团队认为，若未来获得更多资源支持（例如企业合作、研究基金、后续毕业设计延续等），第三阶段将极具实施潜力。**目前阶段的设计与测试，亦已在电气、逻辑、结构三个维度完成了充分准备，具备了“随时升级”的工程弹性与可拓展性。

